<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>dropzone案例</title>
    <link rel="stylesheet" href="dropzone/basic.min.css" />
    <link rel="stylesheet" href="dropzone/dropzone.min.css" />
    <script src="dropzone/dropzone.min.js"></script>

    <script src="jquery/jquery-2.1.1.min.js"></script>
    <script>

//        Dropzone.autoDiscover = false;
    </script>
</head>
<body>

    <table align="center">
        <tr>
            <td>商品名:</td>
            <td><input type="text" id="productName"/></td>
        </tr>
        <tr>
            <td>商品图片:</td>
            <td><input type="hidden" id="picName"/>
                <div id="dropzoneDiv" class="dropzone" style="width: 200px;height:200px"></div></td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="button" value="提交" onclick="showVal()"/>
            </td>
        </tr>

    </table>
    <script>

        Dropzone.options.dropzoneDiv = {
            url: "upload", // 文件提交地址（controller的方法）
            method: "post",  // 也可用put
            paramName: "dropzFile", // 默认为file
            maxFiles: 1,// 一次性上传的文件数量上限
            maxFilesize: 5, // 文件大小，单位：MB
            acceptedFiles: ".jpg,.gif,.png,.jpeg,.txt,.doc,.docx", // 上传的类型
            addRemoveLinks: true,
            parallelUploads: 1,// 一次上传的文件数量
            //previewsContainer:"#preview", // 上传图片的预览窗口
            dictDefaultMessage: '拖动文件至此或者点击上传',
            dictMaxFilesExceeded: "您最多只能上传1个文件！",
            dictResponseError: '文件上传失败!',
            dictInvalidFileType: "文件类型只能是*.jpg,*.gif,*.png,*.jpeg,.txt,.doc,.docx。",
            dictFallbackMessage: "浏览器不受支持",
            dictFileTooBig: "文件过大上传文件最大支持.",
            dictRemoveLinks: "删除",
            dictCancelUpload: "取消",
            init: function () {
                this.on("addedfile", function (file) {
                    // 上传文件时触发的事件
                });
                this.on("success", function (file, data) {
                    // 上传成功触发的事件
                    console.log(file);
                    console.log(data);
                    $("#picName").val("static/upload/"+data.fileName);

                });
                this.on("error", function (file, data) {
                    // 上传失败触发的事件
                });
                this.on("removedfile", function (file) {
                    // 删除文件时触发的方法
                    console.log(file);
                });
            }

        }


        function showVal() {
            alert($("#picName").val());
        }

    </script>
</body>
</html>